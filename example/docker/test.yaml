version: "3.8"

services:
  # cron-worker:
  #   build: .
  #   restart: unless-stopped
  #   volumes:
  #     - /var/run/docker.sock:/var/run/docker.sock
  #   environment:
  #     - LOG_LEVEL=info

  # Example containers with cron labels
  task-runner-1:
    image: alpine:latest
    command: tail -f /dev/null
    volumes:
      - ./tmp:/tmp
    labels:
      - "crontask.cronjob('*/1 * * * *').task=/bin/sh -c 'date > /tmp/date.txt'"
      - 'crontask.cronjob(''*/1 * * * *'').task=/bin/sh -c ''echo "Cleanup task $DATE" > /tmp/cleanup.log'''

  # task-runner-2:
  #   image: ubuntu:latest
  #   command: tail -f /dev/null
  #   labels:
  #     - 'crontask.cronjob(''0 * * * *'').task=/bin/bash -c ''echo "Hourly report" >> /var/log/report.log'''
